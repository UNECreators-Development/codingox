<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Codingox | Controllers</title>
  <!-- <link rel="shortcut icon" href="" /> -->
  <link rel="stylesheet" href="../assets/css/webtheme.css" type="text/css" />

  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>
</head>

<body class="wy-body-for-nav" role="document">
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> Codingox</a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul>
          <li class="toctree-l1"><a class="reference internal" href="welcome.html">Welcome to Codingox</a></li>
        </ul>
        <ul>
          <li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation
              Instructions</a>
          </li>
        </ul>
        <ul>
          <li class="toctree-l1"><a class="reference internal" href="../overview/index.html">Codingox Overview</a>
          </li>
        </ul>
        <ul class="current">
          <li class="toctree-l1 current"><a class="reference internal" href="index.html">General Topics</a>
            <ul class="current">
              <li class="toctree-l2"><a class="reference internal" href="urls.html">URLs</a></li>
              <li class="toctree-l2 current"><a class="current reference internal"
                  href="javascript:void(0)">Controllers</a></li>
              <li class="toctree-l2"><a class="reference internal" href="views.html">Views</a></li>
              <li class="toctree-l2"><a class="reference internal" href="models.html">Models</a></li>
              <li class="toctree-l2"><a class="reference internal" href="helpers.html">Helpers</a></li>
              <li class="toctree-l2"><a class="reference internal" href="libraries.html">Libraries</a>
              </li>
              <li class="toctree-l2"><a class="reference internal" href="creating_libraries.html">Creating Libraries</a>
              </li>
              <li class="toctree-l2"><a class="reference internal" href="routing.html">URI Routing</a></li>
              <li class="toctree-l2"><a class="reference internal" href="errors.html">Error Handling</a></li>
            </ul>
          </li>
        </ul>
        <ul>
          <li class="toctree-l1">
            <a class="reference internal" href="../database/index.html">Database</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal" href="../libraries/index.html">Libraries</a>
          </li>
          <li class="toctree-l1">
            <a class="reference internal" href="../helpers/index.html">Helpers</a>
          </li>
        </ul>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Codingox</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ul class="wy-breadcrumbs">
              <li><a href="../index.html">Docs</a>&raquo;</li>

              <li><a href="index.html">General Topics</a>&raquo;</li>

              <li>Controllers</li>
            </ul>
            <hr />
          </div>

          <div role="main" class="document">
            <div class="section" id="controllers">
              <h1><a class="toc-backref" href="#id1">Controllers</a><a class="headerlink" href="#controllers"
                  title="Permalink to this headline">¶</a></h1>
              <p>Controllers are the main part of your application, as they determine how
                HTTP requests should be handled.</p>
              <div class="contents topic" id="page-contents">
                <p class="topic-title first">Page Contents</p>
                <ul class="simple">
                  <li><a class="reference internal" href="#controllers" id="id1">Controllers</a>
                    <ul>
                      <li><a class="reference internal" href="#what-is-a-controller" id="id2">What is a Controller?</a>
                      </li>
                      <li><a class="reference internal" href="#let-s-try-it-hello-world" id="id3">Let’s try it: Hello
                          World!</a></li>
                      <li><a class="reference internal" href="#methods" id="id4">Methods</a></li>
                      <li><a class="reference internal" href="#passing-uri-segments-to-your-methods" id="id5">Passing
                          URI Segments to your methods</a></li>
                      <li><a class="reference internal" href="#defining-a-default-controller" id="id6">Defining a
                          Default Controller</a></li>
                      <li><a class="reference internal" href="#private-methods" id="id9">Private methods</a></li>
                      <li><a class="reference internal" href="#class-constructors" id="id11">Class Constructors</a></li>
                    </ul>
                  </li>
                </ul>
              </div>
              <div class="section" id="what-is-a-controller">
                <h2><a class="toc-backref" href="#id2">What is a Controller?</a><a class="headerlink"
                    href="#what-is-a-controller" title="Permalink to this headline">¶</a></h2>
                <p><strong>A Controller is simply a class file that is named in a way that can be
                    associated with a URI.</strong></p>
                <p>Consider this URI:</p>
                <div class="highlight-ci">
                  <div class="highlight">
                    <pre><span></span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">index</span><span class="o">.</span><span class="nx">php</span><span class="o">/</span><span class="nx">blog</span><span class="o">/</span>
</pre>
                  </div>
                </div>
                <p>In the above example, Codingox would attempt to find a controller
                  named Blog.php and load it.</p>
                <p><strong>When a controller’s name matches the first segment of a URI, it will
                    be loaded.</strong></p>
              </div>
              <div class="section" id="let-s-try-it-hello-world">
                <h2><a class="toc-backref" href="#id3">Let’s try it: Hello World!</a><a class="headerlink"
                    href="#let-s-try-it-hello-world" title="Permalink to this headline">¶</a></h2>
                <p>Let’s create a simple controller so you can see it in action. Using your
                  text editor, create a file called Blog.php, and put the following code
                  in it:</p>
                <div class="highlight-ci">
                  <div class="highlight">
                    <pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">class</span> <span class="nc">Blog</span> <span class="k">extends</span> <span class="nx">Base_Controller</span> <span class="p">{</span>

        <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span>
        <span class="p">{</span>
                <span class="k">echo</span> <span class="s1">&#39;Hello World!&#39;</span><span class="p">;</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre>
                  </div>
                </div>
                <p>Then save the file to your <em>controllers/</em> directory.</p>
                <div class="admonition important">
                  <p class="first admonition-title">Important</p>
                  <p class="last">The file must be called ‘Blog.php’, with a capital ‘B’.</p>
                </div>
                <p>Now visit the your site using a URL similar to this:</p>
                <div class="highlight-ci">
                  <div class="highlight">
                    <pre><span></span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">index</span><span class="o">.</span><span class="nx">php</span><span class="o">/</span><span class="nx">blog</span><span class="o">/</span>
</pre>
                  </div>
                </div>
                <p>If you did it right, you should see:</p>
                <blockquote>
                  <div>Hello World!</div>
                </blockquote>
                <div class="admonition important">
                  <p class="first admonition-title">Important</p>
                  <p class="last">Class names must start with an uppercase letter.</p>
                </div>
                <p>This is valid:</p>
                <div class="highlight-ci">
                  <div class="highlight">
                    <pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">class</span> <span class="nc">Blog</span> <span class="k">extends</span> <span class="nx">Base_Controller</span> <span class="p">{</span>

<span class="p">}</span>
</pre>
                  </div>
                </div>
                
                <p>Also, always make sure your controller extends the parent controller
                  class so that it can inherit all its methods.</p>
              </div>
              <div class="section" id="methods">
                <h2><a class="toc-backref" href="#id4">Methods</a><a class="headerlink" href="#methods"
                    title="Permalink to this headline">¶</a></h2>
                <p>In the above example the method name is <code
                    class="docutils literal"><span class="pre">index()</span></code>. The “index” method
                  is always loaded by default if the <strong>second segment</strong> of the URI is
                  empty. Another way to show your “Hello World” message would be this:</p>
                <div class="highlight-ci">
                  <div class="highlight">
                    <pre><span></span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">index</span><span class="o">.</span><span class="nx">php</span><span class="o">/</span><span class="nx">blog</span><span class="o">/</span><span class="nx">index</span><span class="o">/</span>
</pre>
                  </div>
                </div>
                <p><strong>The second segment of the URI determines which method in the
                    controller gets called.</strong></p>
                <p>Let’s try it. Add a new method to your controller:</p>
                <div class="highlight-ci">
                  <div class="highlight">
                    <pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">class</span> <span class="nc">Blog</span> <span class="k">extends</span> <span class="nx">Base_Controller</span> <span class="p">{</span>

        <span class="k">public</span> <span class="k">function</span> <span class="nf">index</span><span class="p">()</span>
        <span class="p">{</span>
                <span class="k">echo</span> <span class="s1">&#39;Hello World!&#39;</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">function</span> <span class="nf">comments</span><span class="p">()</span>
        <span class="p">{</span>
                <span class="k">echo</span> <span class="s1">&#39;Look at this!&#39;</span><span class="p">;</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre>
                  </div>
                </div>
                <p>Now load the following URL to see the comment method:</p>
                <div class="highlight-ci">
                  <div class="highlight">
                    <pre><span></span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">index</span><span class="o">.</span><span class="nx">php</span><span class="o">/</span><span class="nx">blog</span><span class="o">/</span><span class="nx">comments</span><span class="o">/</span></pre>
                  </div>
                </div>
                <p>You should see your new message.</p>
              </div>
              <div class="section" id="passing-uri-segments-to-your-methods">
                <h2><a class="toc-backref" href="#id5">Passing URI Segments to your methods</a><a class="headerlink"
                    href="#passing-uri-segments-to-your-methods" title="Permalink to this headline">¶</a></h2>
                <p>If your URI contains more than two segments they will be passed to your
                  method as parameters.</p>
                <p>For example, let’s say you have a URI like this:</p>
                <div class="highlight-ci">
                  <div class="highlight">
                    <pre><span></span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">index</span><span class="o">.</span><span class="nx">php</span><span class="o">/</span><span class="nx">blog</span><span class="o">/</span><span class="nx">article</span><span class="o">/</span><span class="nx">10</span></pre>
                  </div>
                </div>
                <p>Your method will be passed URI segments 3 (“10”):</p>
                <div class="highlight-ci">
                  <div class="highlight">
                    <pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">class</span> <span class="nc">Blog</span> <span class="k">extends</span> <span class="nx">Base_Controller</span> <span class="p">{</span>

        <span class="k">public</span> <span class="k">function</span> <span class="nf">article</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span>
        <span class="p">{</span>
                <span class="k">echo</span> <span class="nv">$id</span><span class="p">;</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre>
                  </div>
                </div>
                <div class="admonition important">
                  <p class="first admonition-title">Important</p>
                  <p class="last">If you are using the <a class="reference internal" href="routing.html"><span
                        class="doc">URI Routing</span></a>
                    feature, the segments passed to your method will be the re-routed
                    ones.</p>
                </div>
              </div>
              <div class="section" id="defining-a-default-controller">
                <h2><a class="toc-backref" href="#id6">Defining a Default Controller</a><a class="headerlink"
                    href="#defining-a-default-controller" title="Permalink to this headline">¶</a></h2>
                <p>Codingox can be told to load a default controller when a URI is not
                  present, as will be the case when only your site root URL is requested.
                  To specify a default controller, open your <strong>config/router.php</strong>
                  file and set this variable:</p>
                <div class="highlight-ci">
                  <div class="highlight">
                    <pre><span></span><span class="nv">$route</span><span class="p">[</span><span class="s1">&#39;default&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;blog&#39;</span><span class="p">;</span>
</pre>
                  </div>
                </div>
                <p>Where ‘blog’ is the name of the controller class you want used. If you now
                  load your main index.php file without specifying any URI segments you’ll
                  see your “Hello World” message by default.</p>
                <p>For more information, please refer to the “Reserved Routes” section of the
                  <a class="reference internal" href="routing.html"><span class="doc">URI Routing</span></a>
                  documentation.
                </p>
              </div>
              
              <div class="section" id="private-methods">
                <h2><a class="toc-backref" href="#id9">Private methods</a><a class="headerlink" href="#private-methods"
                    title="Permalink to this headline">¶</a></h2>
                <p>In some cases you may want certain methods hidden from public access.
                  In order to achieve this, simply declare the method as being private
                  or protected and it will not be served via a URL request. For example,
                  if you were to have a method like this:</p>
                <div class="highlight-ci">
                  <div class="highlight">
                    <pre><span></span><span class="k">private</span> <span class="k">function</span> <span class="nf">_utility</span><span class="p">()</span>
<span class="p">{</span>
        <span class="c1">// some code</span>
<span class="p">}</span>
</pre>
                  </div>
                </div>
                <p>Trying to access it via the URL, like this, will not work:</p>
                <div class="highlight-ci">
                  <div class="highlight">
                    <pre><span></span><span class="nx">example</span><span class="o">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">index</span><span class="o">.</span><span class="nx">php</span><span class="o">/</span><span class="nx">blog</span><span class="o">/</span><span class="nx">_utility</span><span class="o">/</span>
</pre>
                  </div>
                </div>
                <div class="admonition note">
                  <p class="first admonition-title">Note</p>
                  <p class="last">Prefixing method names with an underscore will also prevent
                    them from being called. This is a legacy feature that is left
                    for backwards-compatibility.</p>
                </div>
              </div>
              
              <div class="section" id="class-constructors">
                <h2><a class="toc-backref" href="#id11">Class Constructors</a><a class="headerlink"
                    href="#class-constructors" title="Permalink to this headline">¶</a></h2>
                <p>If you intend to use a constructor in any of your Controllers, you
                  <strong>MUST</strong> place the following line of code in it:
                </p>
                <div class="highlight-ci">
                  <div class="highlight">
                    <pre><span></span><span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">();</span>
</pre>
                  </div>
                </div>
                <p>The reason this line is necessary is because your local constructor will
                  be overriding the one in the parent controller class so we need to
                  manually call it.</p>
                <p>Example:</p>
                <div class="highlight-ci">
                  <div class="highlight">
                    <pre><span></span><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">class</span> <span class="nc">Blog</span> <span class="k">extends</span> <span class="nx">Base_Controller</span> <span class="p">{</span>

        <span class="k">public</span> <span class="k">function</span> <span class="nf">__construct</span><span class="p">()</span>
        <span class="p">{</span>
                <span class="k">parent</span><span class="o">::</span><span class="na">__construct</span><span class="p">();</span>
                <span class="c1">// Your own constructor code</span>
        <span class="p">}</span>
<span class="p">}</span>
</pre>
                  </div>
                </div>
                <p>Constructors are useful if you need to set some default values, or run a
                  default process when your class is instantiated. Constructors can’t
                  return a value, but they can do some default work.</p>
              </div>
              <div class="section" id="reserved-method-names">
                <div class="admonition important">
                  <p class="first admonition-title">Important</p>
                  <p class="last">You should also never have a method named identically
                    to its class name. If you do, and there is no <code
                      class="docutils literal"><span class="pre">__construct()</span></code>
                    method in the same class, then your e.g. <code
                      class="docutils literal"><span class="pre">Index::index()</span></code>
                    method will be executed as a class constructor! This is a PHP4
                    backwards-compatibility feature.</p>
                </div>
              </div>
            </div>
          </div>

          <footer>
            <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
              <a href="views.html" class="btn btn-neutral float-right" title="Views">Next <span
                  class="fa fa-arrow-circle-right"></span></a>

              <a href="urls.html" class="btn btn-neutral" title="Codingox URLs"><span
                  class="fa fa-arrow-circle-left"></span> Previous</a>
            </div>
            <hr />

            <div role="contentinfo">
              <p>&copy; Copyright 2020 Codingox.</p>
            </div>
          </footer>
        </div>
      </div>
    </section>
  </div>

  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT: './',
      VERSION: '1.0',
      COLLAPSE_INDEX: false,
      FILE_SUFFIX: '.html',
      HAS_SOURCE: false
    };
  </script>

  <script type="text/javascript" src="../assets/jquery.js"></script>
  <script type="text/javascript" src="../assets/underscore.js"></script>
  <script type="text/javascript" src="../assets/doctools.js"></script>
  <script type="text/javascript" src="../assets/js/theme.js"></script>

  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });
  </script>

</body>

</html>